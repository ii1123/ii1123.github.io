:root{
  --bg1:#0f1020; 
  --bg2:#1b1e3a; 
  --accent:#ff4d6d; 
  --text:#f7f7ff; 
  --muted:#cfd3ff;
  --glass: rgba(255,255,255,.03); 
  --glass-bd: rgba(255,255,255,.08);
  --ring:#ffffff33;
  --ring-strong:#ffffff66;
  --shadow: 0 10px 40px rgba(0,0,0,.35);
}

/* ===== Base ===== */
*{box-sizing:border-box}
html,body{
  height:100%; margin:0;
  font-family:'Tajawal',system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
  background:
    radial-gradient(1200px circle at 20% 10%, rgba(255,77,109,.07), transparent 40%),
    radial-gradient(1000px circle at 90% 80%, rgba(207,211,255,.08), transparent 45%),
    linear-gradient(160deg,var(--bg1),var(--bg2));
  color:var(--text); 
  overflow-x:hidden; 
  overflow-y:auto;
}
html { scroll-behavior: smooth; }
.glass{background:var(--glass); border:1px solid var(--glass-bd); backdrop-filter:blur(8px)}

/* ===== Background particles ===== */
.stars,.hearts{position:fixed; inset:0; pointer-events:none; z-index:1}
.star{position:absolute; width:2px; height:2px; background:rgba(255,255,255,.8); border-radius:50%; opacity:0; animation:twinkle 6s linear infinite}
@keyframes twinkle{0%{transform:translateY(0);opacity:0}10%{opacity:1}50%{opacity:.6}100%{transform:translateY(40px);opacity:0}}
.heart{position:absolute; width:12px; height:12px; background:var(--accent); transform:rotate(45deg); border-radius:2px; opacity:.8; animation:float 10s linear infinite}
.heart::before,.heart::after{content:""; position:absolute; width:12px; height:12px; background:var(--accent); border-radius:50%}
.heart::before{top:-6px; left:0} .heart::after{left:-6px; top:0}
@keyframes float{0%{transform:translateY(0) rotate(45deg) scale(1);opacity:0}10%{opacity:.7}50%{transform:translateY(-55vh) rotate(45deg) scale(1.15)}100%{transform:translateY(-110vh) rotate(45deg) scale(1.3);opacity:0}}

/* ===== Layout ===== */
.wrap{position:relative; z-index:3; min-height:100%; display:grid; place-items:center; padding:24px; text-align:center; padding-bottom:180px}
.card{background:var(--glass); border:1px solid var(--glass-bd); box-shadow:var(--shadow); border-radius:20px; padding:28px 22px; max-width:760px; width:100%; backdrop-filter:blur(10px)}
h1{margin:0 0 8px 0; font-size:28px; letter-spacing:.5px}
.subtitle{margin:0 0 20px 0; font-size:16px; color:var(--muted)}
.footer{margin-top:14px; font-size:14px; color:var(--muted)}

/* ===== Rotating lines ===== */
.line{min-height:112px; display:grid; place-items:center; font-size:30px; font-weight:700; line-height:1.5; padding:10px 4px}
.line span{display:inline-block; opacity:0; transform:translateY(12px) scale(.98); filter:blur(6px); animation:in 1000ms ease forwards}
@keyframes in{to{opacity:1; transform:translateY(0) scale(1); filter:blur(0)}}
.dots{margin-top:14px; display:flex; justify-content:center; gap:8px}
.dot{width:8px; height:8px; border-radius:50%; background:rgba(255,255,255,.2)}
.dot.active{background:var(--accent)}

/* ===== Buttons ===== */
.cta{
  margin-top:18px; display:inline-block; padding:12px 18px; border-radius:12px;
  border:1px solid rgba(255,255,255,.14); text-decoration:none; color:var(--text);
  font-weight:700; transition:transform .15s ease, background .2s ease, opacity .2s, box-shadow .2s ease;
  background: transparent; box-shadow: 0 0 0 0 rgba(255,255,255,0);
}
.cta:hover{background:rgba(255,255,255,.06); transform: translateY(-1px); box-shadow: 0 6px 18px rgba(0,0,0,.25), 0 0 0 4px var(--ring)}
.cta:active{transform:translateY(0) scale(.98); box-shadow: 0 2px 10px rgba(0,0,0,.3), 0 0 0 3px var(--ring-strong)}
button.cta{-webkit-appearance:none; appearance:none; background: transparent; cursor: pointer}
button.cta:disabled{background: rgba(255,255,255,.06); color: var(--muted); border-color: rgba(255,255,255,.12); cursor: not-allowed; opacity:1; box-shadow:none}
.cta:focus-visible, .down:focus-visible, .notebook textarea:focus-visible, .notebook button:focus-visible{outline:none; box-shadow:0 0 0 4px var(--ring-strong); transition: box-shadow .2s ease}

/* ===== Support box ===== */
.support{margin-top:18px; text-align:left; background:rgba(255,255,255,.04); border:1px solid var(--glass-bd); border-radius:16px; padding:16px}
.support h3{margin:0 0 8px; font-size:18px}
.support p{margin:8px 0; color:var(--muted)}

/* ===== Breathe coach ===== */
.breathe{margin-top:10px; display:grid; place-items:center}
.circle{width:120px; height:120px; border-radius:999px; border:2px dashed rgba(255,255,255,.35); display:grid; place-items:center}
.circle-inner{width:20px; height:20px; border-radius:999px; background:var(--accent); animation:breath 8s ease-in-out infinite}
@keyframes breath{0%{transform:scale(1)}40%{transform:scale(2.8)}60%{transform:scale(2.8)}100%{transform:scale(1)}}
.breath-steps{font-size:13px; color:var(--muted); margin-top:8px}

/* ===== Notebook ===== */
.notebook{position:fixed; left:12px; bottom:12px; z-index:4; width:260px; display:flex; flex-direction:column; gap:8px; padding:12px; border-radius:12px; background:rgba(255,255,255,.08); border:1px solid var(--glass-bd); box-shadow:0 6px 18px rgba(0,0,0,.35)}
.notebook .title{font-weight:700; font-size:14px; color:var(--text)}
.notebook textarea{width:100%; min-height:90px; resize:vertical; border:none; outline:none; font-size:14px; color:var(--text); line-height:22px; padding:10px 12px; border-radius:8px; background:rgba(255,255,255,.06); transition: box-shadow .2s ease, background .2s ease}
.notebook textarea:focus{background: rgba(255,255,255,.08); box-shadow: 0 0 0 4px var(--ring)}
.notebook button{align-self:flex-end; border:none; border-radius:8px; padding:6px 10px; cursor:pointer; background:#8B0B7A; color:#fff; font-size:12px; font-weight:700; transition: transform .12s ease, box-shadow .2s ease}
.notebook button:hover{transform: translateY(-1px); box-shadow: 0 6px 16px rgba(0,0,0,.25), 0 0 0 4px var(--ring)}
.memo-hint{font-size:11px; color:var(--muted); text-align:right}

/* ===== Since widget ===== */
.since{position:fixed; right:12px; bottom:12px; z-index:4; background:rgba(255,255,255,.08); border:1px solid var(--glass-bd); backdrop-filter:blur(6px); padding:8px 12px; border-radius:12px; font-size:13px; transition: box-shadow .2s ease, transform .12s ease}
.since:hover{transform: translateY(-1px); box-shadow: 0 6px 16px rgba(0,0,0,.25), 0 0 0 4px var(--ring)}

/* ===== Down link + Section 2 ===== */
@media (max-width:520px){ .card{padding:22px 16px} .line{font-size:22px} .notebook{width:70vw} .wrap{ padding-bottom: 220px } }
.down{margin-top:16px; display:inline-flex; align-items:center; gap:6px; padding:10px 14px; border-radius:12px; border:1px solid rgba(255,255,255,.14); color:var(--accent); text-decoration:none; font-weight:700; transition: background .2s ease,transform .15s.ease, box-shadow .2s ease}
.down:hover{background:rgba(255,255,255,.06); transform: translateY(-1px); box-shadow: 0 6px 16px rgba(0,0,0,.25), 0 0 0 4px var(--ring)}
.down:active{transform:translateY(0) scale(.98)}
.section{position:relative; z-index:3; padding:48px 20px 80px; display:grid; place-items:center}
.section .card{max-width:760px; width:100%; background:var(--glass); border:1px solid var(--glass-bd); border-radius:20px; padding:28px 22px; backdrop-filter:blur(10px); box-shadow:var(--shadow); opacity:0; transform:translateY(24px); transition:opacity .6s ease, transform .6s ease}
.section .card.show{opacity:1; transform:translateY(0)}
#readySection{scroll-margin-top:24px}

/* ===== Mood Toy (SVG) ===== */
.mood-toy{
  position:fixed; right:12px; bottom:76px; z-index:5;
  display:grid; place-items:center; gap:6px;
  padding:10px 12px; border-radius:16px;
  background:rgba(255,255,255,.08);
  border:1px solid var(--glass-bd);
  backdrop-filter:blur(8px);
  box-shadow:0 6px 18px rgba(0,0,0,.35);
  cursor:pointer;
  transition: transform .18s ease, box-shadow .18s ease;
}
.mood-toy:hover{ transform: translateY(-2px); box-shadow: 0 8px 22px rgba(0,0,0,.45), 0 0 0 4px var(--ring) }
.mood-toy:active{ transform: translateY(0) scale(.98) }
.mood-toy .toy-label{ font-size:12px; color:var(--muted) }
.toy-figure{ perspective: 800px; }
.toy-svg{ display:block; transform-style:preserve-3d }

/* Flip anim */
.toy-figure.flip .toy-svg{ animation: toyFlip .55s ease both }
@keyframes toyFlip{
  0%{transform: rotateY(0deg)}
  50%{transform: rotateY(90deg)}
  100%{transform: rotateY(180deg)}
}

/* Mood colors */
.mood-toy.happy #head { fill: url(#happyGrad) }
.mood-toy.sad   #head { fill: url(#sadGrad)   }

/* Faces visibility */
.face{ opacity:0; transition: opacity .2s ease }
.mood-toy.happy .face-happy{ opacity:1 }
.mood-toy.sad   .face-sad  { opacity:1 }

/* ===== Reduce Motion ===== */
@media (prefers-reduced-motion: reduce){
  *, *::before, *::after{
    animation-duration:0.01ms !important;
    animation-iteration-count:1 !important;
    transition:none !important;
    scroll-behavior: auto !important;
  }
  .star, .heart, .toy-figure.flip .toy-svg{animation:none !important}
}
/* ==== Fix overlaps & mobile spacing ==== */

/* أعطِ مساحة سفلية للمحتوى عشان العناصر المثبتة ما تغطيه */
.wrap,
.section,
.notebook {
  padding-bottom: 240px;           /* مساحة كافية لودجت Since + لعبة المزاج */
}

/* لعبة المزاج: ثبّتها فوق شوية وما تغطي الأزرار */
.mood-toy {
  position: fixed;
  right: 16px;
  bottom: calc(96px + env(safe-area-inset-bottom, 0px)); /* ارفعها فوق ودجت الـ Since */
  z-index: 9;
}

/* ودجت الوقت "Since": خلّه منخفض شوي وفي الوسط/يمين حسب ذوقك */
.since {
  position: fixed;
  left: 50%;
  transform: translateX(-50%);
  bottom: calc(20px + env(safe-area-inset-bottom, 0px));
  z-index: 8;
}

/* عناصر الخلفية ما تتلقّى لمس */
.stars, .hearts { pointer-events: none; }

/* تحسين وضع الجوال */
@media (max-width: 600px) {
  .card { max-width: 94vw; }
  .notebook, #memo { width: 100%; max-width: 94vw; }
  .mood-toy { right: 12px; bottom: calc(104px + env(safe-area-inset-bottom, 0px)); }
  .since { bottom: calc(16px + env(safe-area-inset-bottom, 0px)); }
}
/* ===== Fix since widget + memo layout & overlaps ===== */

/* ثبّت العداد في الركن اليمين تحت بدون ترجمة بالنصف */
.since {
  position: fixed !important;
  right: 16px;
  left: auto !important;
  transform: none !important;
  bottom: calc(16px + env(safe-area-inset-bottom, 0px));
  z-index: 7;
}

/* لعبة المزاج فوق العداد شوي وما تغطي الأزرار */
.mood-toy {
  position: fixed;
  right: 16px;
  bottom: calc(90px + env(safe-area-inset-bottom, 0px));
  z-index: 8;
}

/* أعطِ المحتوى مساحة سفلية كافية عشان ما تتداخل العناصر المثبتة */
.wrap,
.section,
.notebook {
  padding-bottom: 240px;  /* زوّدها لـ 280px إذا لسه يلمس العناصر */
}

/* تحجيم وتوسيط المذكرة */
.notebook {
  max-width: 720px;       /* على الدسك تظل أنيقة */
  margin: 24px auto;
  position: relative;
}
#memo {
  width: 100%;
  box-sizing: border-box;
}

/* ضبط عام للجوال */
@media (max-width: 600px) {
  .card { max-width: 94vw; }
  .notebook { max-width: 94vw; }
  .mood-toy { right: 12px; bottom: calc(96px + env(safe-area-inset-bottom, 0px)); }
  .since { right: 12px; bottom: calc(14px + env(safe-area-inset-bottom, 0px)); }
}
#readyCard { opacity: 1 !important; transform: none !important; visibility: visible !important; }

